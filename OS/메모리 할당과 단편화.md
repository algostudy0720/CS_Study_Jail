
# 1. 메모리 할당과 단편화

## 1-1. 메모리 할당

- 프로세스를 메모리에 할당하는 것
- 메모리 공간을 할당할 떄 빈 곳이 여러 곳이라면 어디에 메모리를 할당할 지 정해야함
    - 메모리 공간을 어떻게 구분해 할당할 것인가?
        
        → 고정 분할, 가변 분할
        

### 1-1-1. 고정 분할

- 메모리를 고정된 크기로 분할하는 것
- 내부 단편화가 발생할 수 있음

### 1-1-2. 가변 분할

- 메모리의 사용 여부를 판별할 수 있는 테이블을 유지하여 관리하는 기법
    - 프로세스가 시스템에 들어오면 입력 큐에 넣어 관리
    - 프로세스에 따라 운영체제가 메모리 공간(hole)을 할당
- 다양한 크기의 메모리 공간(hole)이 존재함
- 외부 단편화가 발생할 수 있음 → 페이징 기법을 활용하여 극복
- 적절한 공간을 찾기 위한 방법이 존재
    
    → 최초 적합, 최적 적합, 최악 적합
    
- 최초 적합(First Fit)
    - 최초로 발견된 가용 가능한 메모리 공간에 프로세스를 할당
    - 프로세스를 할당하고 다시 남는 메모리 공간은 Free Hole이라고 한다.
    - 속도 자체는 제일 빠름
    
    ![Untitled](https://user-images.githubusercontent.com/45481007/157649640-88f55065-a013-4f85-8c36-c45e6ab5a9c9.png)

- 최적 적합(Best Fit)
    - 가장 적합한 hole을 찾아 할당하는 방법
    - Free Hole이 가장 적게 발생하는 메모리 공간에 할당
    - 메모리의 가용 공간 리스트가 크기순으로 정렬되어 있지 않으면 전부 검색해야함
    - 가장 적합한 메모리 공간을 찾기 위해 검색이 필요함
    
    ![Untitled 1](https://user-images.githubusercontent.com/45481007/157649656-91d84eaf-c0a3-45b0-809e-cd1dcb9c4b7b.png)
    
- 최악 적합(Worst Fit)
    - 가용 가능한 메모리 공간 중 가장 큰 공간에 할당하는 방법
    - 가장 큰 공간에 할당하면 Free Hole도 충분히 커서 효율적으로 사용할 수 있을 것이라는 개념
    
    ![Untitled 2](https://user-images.githubusercontent.com/45481007/157649669-4c950c40-f771-4bbf-bf32-0eb403cfa6bf.png)
    

## 1-2. 단편화

- 메모리의 공간이 작은 조각으로 나누어져 사용가능한 메모리가 충분히 존재하지만 할당이 불가능한 상태를 메모리 단편화가 발생한 상태라고 한다.

### 1-2-1. 내부 단편화

- 메모리를 할당할 때 프로세스가 필요한 용량보다 더 큰 메모리가 할당 되어 프로세스 사용해야할 메모리 공간이 낭비되는 현상

![Untitled 3](https://user-images.githubusercontent.com/45481007/157649688-5403743f-118b-4cf8-93ce-ab0832370838.png)

### 1-2-2. 외부 단편화

- 메모리의 할당 및 해제 작업의 반복으로 작은 메모리 공간이 메모리 공간 사이사이에 존재하여 사용해야 할 메모리 공간이 낭비되는 현상

![Untitled 4](https://user-images.githubusercontent.com/45481007/157649702-bc025efc-ec10-4d98-9f4c-ce0f10a6c72d.png)


### [출처]

[https://techvu.dev/105](https://techvu.dev/105)

[https://junghyun100.github.io/메모리단편화/](https://junghyun100.github.io/%EB%A9%94%EB%AA%A8%EB%A6%AC%EB%8B%A8%ED%8E%B8%ED%99%94/)
