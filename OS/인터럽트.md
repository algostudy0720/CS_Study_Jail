# [OS] μΈν„°λ½νΈ(Interrupt)

μƒνƒ: μ™„λ£ π™
μ‘μ„±μΌμ‹: 2022λ…„ 3μ›” 3μΌ μ¤ν›„ 7:52

# 1. μΈν„°λ½νΈλ€?

- ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•λ” μ¤‘μ— μκΈ°μΉ μ•μ€ μƒν™©μ΄ λ°μƒν–μ„ λ• ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ μ‘μ—…μ„ μ¤‘λ‹¨ν•κ³  λ°μƒλ μƒν™©μ— λ€ν• μ²λ¦¬κ°€ ν•„μ”ν•¨μ„ CPUμ—κ² μ „λ‹¬ν•λ” κ²ƒ
- ν„μ¬ μ§„ν–‰ μ¤‘μΈ μ‘μ—…λ³΄λ‹¤ μ°μ„ μμ„κ°€ λ†’μ€ μ‘μ—…μ΄λΌλ©΄ ν•΄λ‹Ή μ‘μ—…μ„ λ¨Όμ € μ²λ¦¬ν•΄μ•Ό ν•¨
- μ…μ¶λ ¥ μ¥μΉμ™€ κ°™μ€ μ£Όλ³€μ¥μΉλ“¤μ€ μΈν„°λ½νΈλ΅ κ΄€λ¦¬λ¨
    - μ…μ¶λ ¥ μ—°μ‚°μ κ²½μ° CPUμ μν–‰μ†λ„λ³΄λ‹¤ ν„μ €ν λλ¦¬κΈ° λ•λ¬Έμ— CPUλ¥Ό μ‘μ—…μ‹κ°„μ„ λ‚­λΉ„ν•κ² λλ―€λ΅ λ‹¤λ¥Έ μ‘μ—…μ„ μ²λ¦¬ν•λ„λ΅ CPUλ¥Ό λ„κΈ°κ³  λλ‚λ©΄ CPUμ— λ‹¤μ‹ μ•λ ¤ μ΄μ „ μ‘μ—…μ„ μ΄μ–΄κ°€λ„λ΅ ν•¨

# 2. μΈν„°λ½νΈμ μΆ…λ¥

### 2-1. μ™Έλ¶€ μΈν„°λ½νΈ(ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ)

- CPUμ ν•λ“μ›¨μ–΄ μ‹ νΈμ— μν•΄ λ°μƒ
    - μ™Έλ¶€ μΈν„°λ½νΈ
        - μ…μ¶λ ¥, μ™Έλ¶€ μ‹ νΈ, μ „μ› μ΄μƒ λ“± μ¥μΉμ λ¬Έμ λ‚ μ‹ νΈ λ“± μ™Έλ¶€μ μΈ μ”μΈμΌλ΅ λ°μƒ
        
        > ν‚¤λ³΄λ“, ν”„λ¦°ν„° λ“±μ I/O μ΄λ²¤νΈ, νƒ€μ΄λ²„ μ΄λ²¤νΈ λ“±
        > 

### 2-2. λ‚΄λ¶€ μΈν„°λ½νΈ

- λ‚΄λ¶€ μΈν„°λ½νΈ
    - Trapμ΄λΌκ³ λ„ λ¶€λ¦„
    - μλ»λ λ…λ Ήμ΄λ‚ λ°μ΄ν„°μ  μ΄μƒ μ‹ λ°μƒ
        
        > 0μΌλ΅ λ‚λ λ•, μ¤λ²„ν”λ΅μ°, Exception λ°μƒ, System call λ“±
        > 
        

### 2-3. μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ

- ν”„λ΅κ·Έλ¨μ μ²λ¦¬ μ¤‘ μ”μ²­μ— μν•΄ λ°μƒ(SVC μΈν„°λ½νΈ)
    
    > μ†ν”„νΈμ›¨μ–΄ μ‚¬μ© μ¤‘ λ‹¤λ¥Έ μ†ν”„νΈμ›¨μ–΄λ¥Ό μ‹¤ν–‰ν•λ©΄ μ‹λ¶„ν•  μ²λ¦¬λ¥΄ μ„ν•΄ μμ› ν• λ‹Ή λ™μ‘μ΄ μν–‰λ¨
    > 

# 3. μΈν„°λ½νΈμ μ²λ¦¬ κ³Όμ •

- ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘ μΈν„°λ½νΈκ°€ λ°μƒ
- ν„μ¬ μν–‰μ¤‘μΈ ν”„λ΅κ·Έλ¨ μ¤‘μ§€
- μΈν„°λ½νΈ μ²λ¦¬ ν›„ ν„ μƒνƒλ΅ λμ•„μ¤κΈ° μ„ν•΄ ν„μ¬ μƒνƒμ™€ λ°μ΄ν„°λ¥Ό μ»¤λ„μ λ°μ΄ν„° μμ—­μ— μ΅΄μ¬ν•λ” Process Control Block(PCB)μ— μ €μ¥
- μΈν„°λ½νΈ μ²λ¦¬(IDTμ— λ”°λΌ μΈν„°λ½νΈ μ²λ¦¬ ν•¨μ μ‹¤ν–‰)
- μ¤νƒ μμ—­μΌλ΅ μ΄λ™ν•μ—¬ μ΄μ „ μ‘μ—… μƒνƒλ΅ λ³µκ·€

### if. μΈν„°λ½νΈ κΈ°λ¥μ΄ μ—†λ‹¤λ©΄?

- μ»¨νΈλ΅¤λ¬λ” μ–΄λ–¤ λ™μ‘μ΄ μ–΄λ μ‹μ μ— μν–‰λ μ§€ λ―Έλ¦¬ μ•μ§€ λ»ν•κΈ° λ•λ¬Έμ— κ³„μ† λ™μ‘μ΄ μν–‰λλ”μ§€ ν™•μΈμ„ ν•΄μ•Ό ν•λ‹¤.( β‡’ ν΄λ§)
- κ³„μ† ν™•μΈμ„ ν•΄μ•Όν•κΈ° λ•λ¬Έμ— ν„μ¬ μν–‰μ¤‘μΈ μ‘μ—…μ ν¨μ¨μ΄ λ–¨μ–΄μ§€κ² λλ‹¤.

## 4. μ»¨νΈλ΅¤λ¬κ°€ μΈν„°λ½νΈλ¥Ό μΈμ‹ν•λ” λ°©λ²•

### 4-1. ν΄λ§ λ°©μ‹

- μ‚¬μ©μκ°€ λ…λ Ήμ„ μ§μ ‘ μ‚¬μ©ν•μ—¬ μ…λ ¥ μ‹ νΈλ¥Ό κ³„μ† μ½μ–΄ λ³€ν™”λ¥Ό μ•μ•„λ‚΄λ” λ°©μ‹
- μΈν„°λ½νΈμ μ”μ²­μ„ μ°¨λ΅€λ΅ λΉ„κµν•μ—¬ μ°μ„ μμ„κ°€ κ°€μ¥ λ†’μ€ μΈν„°λ½νΈλ¥Ό μ°Ύμ•„ λ¨Όμ € μ²λ¦¬ν•¨
- ν•λ“μ›¨μ–΄μ—μ„ λ³€ν™”λ¥Ό κ°μ§€ν•λ” μΈν„°λ½νΈ λ°©μ‹λ³΄λ‹¤ λλ¦Ό

### 4-2. μΈν„°λ½νΈ λ°©μ‹

- MCU μμ²΄κ°€ ν•λ“μ›¨μ–΄μ μΌλ΅ λ³€ν™”λ¥Ό ν™•μΈν•μ—¬ λ³€ν™” μ‹μ—λ§ λ™μ‘ν•λ” λ°©μ‹
    - Daisy Chain
    - λ³‘λ ¬ μ°μ„ μμ„ λ¶€μ—¬
- ν΄λ§ λ°©μ‹μ— λΉ„ν•΄ μ‹ μ†ν• λ€μ‘μ΄ κ°€λ¥

β‡’ λ°μƒμ‹κΈ°λ¥Ό μμΈ΅ν•κΈ° νλ“  κ²½μ° μ‹¤μ‹κ°„ λ€μ‘ν•  μ μμΌλ―€λ΅ μ»¨νΈλ΅¤λ¬κ°€ κ°€μ¥ λΉ λ¥΄κ² μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•  μ μλ” λ°©μ‹μ΄λ‹¤.

## 5. μ©μ–΄ μ •λ¦¬

- SVC μΈν„°λ½νΈ(SuperVisor  Call)
    - μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰μ‹ν‚¤κ±°λ‚ OSλ¥Ό νΈμ¶ν•λ” κ²½μ°
    - μ‚¬μ©μκ°€ SVC λ…λ Ήμ„ μ¨μ„ μλ„μ μΌλ΅ νΈμ¶ν• κ²½μ°, λ³µμ΅ν• μ…μ¶λ ¥ μ²λ¦¬λ¥Ό ν•΄μ•Όν•λ” κ²½μ°, κΈ°μ–µμ¥μΉ ν• λ‹Ή λ° μ¤νΌλ μ΄ν„°μ™€ λ€ν™”λ¥Ό ν•΄μ•Όν•λ” κ²½μ° λ°μƒ
- IDT(Interrupt Descriptor Table)
    - μ‹μ¤ν… μ½μ΄λ‚ 0μΌλ΅ λ‚λ„κΈ° λ“± μ—¬λ¬ μΈν„°λ½νΈλ¥Ό κ°κ° λ²νΈμ™€ μ‹¤ν–‰ μ½”λ“λ΅ μ •μν•΄λ†“μ€ ν…μ΄λΈ”
    - μ»΄ν“¨ν„° λ¶€ν… μ‹ μ΄μμ²΄μ κ°€ μ‘μ„±
    - μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ IDTλ¥Ό ν™•μΈν•΄μ„ μ •μλ μΈν„°λ½νΈ μ²λ¦¬ν•¨μλ¥Ό μ‹¤ν–‰
- Daisy Chain
    - μΈν„°λ½νΈκ°€ λ°μƒν•λ” λ¨λ“  μ¥μΉλ¥Ό μ§λ ¬λ΅ μ—°κ²°ν•κ³  μ°μ„ μμ„κ°€ λ†’μ€ μ¥μΉ μμ„λ΅ μ •λ ¬ν•μ—¬ μ°μ„  μμ„λ€λ΅ μ²λ¦¬ν•λ” λ°©μ‹
- λ³‘λ ¬ μ°μ„ μμ„ λ¶€μ—¬
    - μΈν„°λ½νΈκ°€ λ°μƒν•λ” μ¥μΉλ“¤μ„ κ°λ³„μ μΈ νμ„ μΌλ΅ μ—°κ²°
    - Mask Registerμ λΉ„νΈ μ„μΉμ— λ”°λΌ μ°μ„ μμ„ κ²°μ •
    - μ°μ„ μμ„κ°€ λ†’μ€ κ²ƒμ΄ μ‹¤ν–‰ μ¤‘μΌ λ•λ” μ°μ„ μμ„κ°€ λ‚®μ€ μΈν„°λ½νΈλ” λΉ„ν™μ„±ν™”
    - μ°μ„ μμ„κ°€ λ†’μ€ μΈν„°λ½νΈλ” μ°μ„ μμ„κ°€ λ‚®μ€ μΈν„°λ½νΈ μ²λ¦¬ μ¤‘μ—λ„ μ°μ„  μ²λ¦¬λ¨
- MCU(Micro Cotroller Unit)
    - λ§μ΄ν¬λ΅ μ»¨νΈλ΅¤λ¬
    - μ „μκΈ°κΈ°μ— νƒ‘μ¬λμ–΄ β€μ μ–΄β€™λ‚ β€μ—°μ‚°β€™ μ‘μ—…μ„ μν–‰ν•¨
    - μ£Όλ³€μ¥μΉλ¥Ό μ μ–΄